<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>모바일 태극기</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: white;
            -webkit-text-size-adjust: 100%;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }

        :fullscreen {
            background: white;
        }

        :-webkit-full-screen {
            background: white;
        }

        .wrap {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 20px;
        }

        .svg-container {
            position: relative;
            width: 100%;
            height: 100%;
            /* aspect-ratio를 추가해 비율 유지 */
            aspect-ratio: 3/2;
        }
        
        .wrap svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #fullscreenBtn {
            position: fixed;
            right: 10px;
            top: 10px;
            padding: 8px 16px;
            background: rgba(0, 73, 152, 0.7);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            cursor: pointer;
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
        }
        
        /* 버튼 호버 효과 추가 */
        #fullscreenBtn:hover {
            background: rgba(0, 73, 152, 0.9);
        }
        
        /* 터치 기기를 위한 액티브 상태 */
        #fullscreenBtn:active {
            background: rgba(0, 73, 152, 1);
            transform: scale(0.98);
        }

        @media screen and (orientation: landscape) {
            .wrap {
                padding: 10px 60px;
            }
            
            .wrap svg {
                height: 95vh;
            }
        }

        @supports (-webkit-touch-callout: none) {
            .svg-container {
                width: 90%;
                max-width: 90vw;
                max-height: 90vh;
            }
            
            @media screen and (orientation: landscape) {
                .svg-container {
                    width: auto;
                    height: 80vh;
                    aspect-ratio: 3/2;
                }
            }
        }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="svg-container">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="-72 -48 144 96" preserveAspectRatio="xMidYMid meet" width="100%" height="100%">
                <title>태극기</title>
                <rect fill="#FFFFFF" x="-72" y="-48" width="144" height="96"/>
                <g transform="rotate(33.69)">
                    <g id="태극">
                        <path d="M-24,0A24,24 0 0 1 24,0Z" fill="#CD313A"/>
                        <path d="M24,0A24,24 0 0 1 -24,0Z" fill="#004998"/>
                        <circle cx="-12" cy="0" r="12" fill="#CD313A" stroke-width="0"/>
                        <circle cx="12" cy="0" r="12" fill="#004998" stroke-width="0"/>
                    </g>
                    <path id="건" d="M-52,-12v24h4v-24Z m6,0v24h4v-24Z m6,0v24h4v-24Z" fill="#000000"/>
                    <path id="곤" d="M36,-12v11h4v-11Z m0,13v11h4v-11Z m6,-13v11h4v-11Z m0,13v11h4v-11Z m6,-13v11h4v-11Z m0,13v11h4v-11Z" fill="#000000"/>
                </g>
                <g transform="rotate(-33.69)">
                    <path id="리" d="M-52,-12v24h4v-24Z m6,0v11h4v-11Z m0,13v11h4v-11Z m6,-13v24h4v-24Z" fill="#000000"/>
                    <path id="감" d="M36,-12v11h4v-11Z m0,13v11h4v-11Z m6,-13v24h4v-24Z m6,0v11h4v-11Z m0,13v11h4v-11Z" fill="#000000"/>
                </g>
            </svg>
        </div>
    </div>
    <script>
        function goFullscreenLandscape() {
            const element = document.documentElement;
            
            // iOS Safari에서는 전체화면 API가 제한적이므로 조건부 실행
            if (element.requestFullscreen) {
                element.requestFullscreen().catch(err => console.log('전체화면 전환 실패:', err));
            } else if (element.webkitRequestFullscreen) {
                element.webkitRequestFullscreen().catch(err => console.log('전체화면 전환 실패:', err));
            }
            
            // 약간의 지연 후 화면 회전 시도
            setTimeout(() => {
                try {
                    if (screen.orientation && screen.orientation.lock) {
                        screen.orientation.lock('landscape').catch(() => {
                            // iOS에서는 화면 회전 API가 지원되지 않으므로 사용자에게 안내
                            if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
                                alert('화면을 가로로 돌려주세요');
                            }
                        });
                    }
                } catch (e) {
                    console.log('화면 회전 오류:', e);
                }
            }, 100);
        }

        // 전체화면 이벤트 리스너
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);

        function handleFullscreenChange() {
            const btn = document.getElementById('fullscreenBtn');
            if (document.fullscreenElement || document.webkitFullscreenElement) {
                btn.textContent = '전체화면 종료';
                btn.onclick = exitFullscreen;
            } else {
                btn.textContent = '전체화면 시작';
                btn.onclick = goFullscreenLandscape;
            }
        }

        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            }

            if (screen.orientation && screen.orientation.unlock) {
                screen.orientation.unlock();
            }
        }

        // 버튼 생성
        const button = document.createElement('button');
        button.id = 'fullscreenBtn';
        button.textContent = '전체화면 시작';
        button.addEventListener('click', goFullscreenLandscape);
        document.body.appendChild(button);
    </script>
</body>
</html>
